# 服务器部署说明

## 问题排查：cannot execute binary file

如果遇到 `cannot execute binary file` 错误，请按以下步骤排查：

### 1. 检查服务器架构

在服务器上运行：
```bash
uname -m
```

常见结果：
- `x86_64` 或 `amd64` → 使用默认编译（amd64）
- `aarch64` 或 `arm64` → 需要编译 ARM64 版本

### 2. 根据架构编译

**如果服务器是 x86_64/amd64：**
```bash
cd go_backend
./build_bt.sh
```

**如果服务器是 aarch64/arm64：**
```bash
cd go_backend
./build_bt.sh arm64
```

### 3. 上传并设置权限

1. 上传编译好的文件到服务器（例如：`go_backend_linux_amd64` 或 `go_backend_linux_arm64`）

2. 设置执行权限：
```bash
chmod +x go_backend_linux_amd64
# 或
chmod +x go_backend_linux_arm64
```

3. 测试运行：
```bash
./go_backend_linux_amd64
# 或
./go_backend_linux_arm64
```

### 4. 宝塔面板配置

在宝塔面板中：
1. 确保启动文件路径正确
2. 确保文件有执行权限（可以在文件管理中右键 → 权限 → 勾选执行）
3. 如果使用守护进程，确保启动命令指向正确的文件

### 5. 常见问题

**问题：cannot execute binary file**
- 原因：架构不匹配或文件损坏
- 解决：检查服务器架构，重新编译对应版本

**问题：Permission denied**
- 原因：文件没有执行权限
- 解决：`chmod +x 文件名`

**问题：找不到文件**
- 原因：路径错误
- 解决：使用绝对路径或确保在正确目录

## 编译选项说明

- `./build_bt.sh` - 编译 Linux/amd64 版本（适用于大多数 x86_64 服务器）
- `./build_bt.sh arm64` - 编译 Linux/arm64 版本（适用于 ARM 架构服务器）
- `./build_bt.sh help` - 显示帮助信息

## 文件说明

编译后的文件位于 `dist/` 目录：
- `go_backend_linux_amd64` - x86_64/amd64 架构
- `go_backend_linux_arm64` - ARM64 架构

