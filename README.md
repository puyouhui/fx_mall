# 商品选购小程序

这是一个基于UniApp开发的商品选购小程序，同时包含Go语言(Gin框架)的后端服务。该小程序提供商品浏览、分类查看、采购单管理等功能，适用于小型电商或内部采购场景。

## 项目结构

```
├── mini_app/         # 前端UniApp项目
│   ├── pages/        # 页面文件
│   │   ├── index/    # 首页
│   │   ├── category/ # 分类页
│   │   ├── cart/     # 采购单页
│   │   └── product/  # 商品详情页
│   ├── api/          # API请求封装
│   ├── static/       # 静态资源
│   │   ├── icon/     # 图标资源
│   │   ├── tabbar/   # 标签栏资源
│   │   └── test/     # 测试图片资源
│   ├── App.vue       # 应用入口
│   ├── main.js       # 主文件
│   ├── pages.json    # 页面配置
│   └── uni_modules/  # 第三方模块
└── go_backend/       # 后端Go项目
    ├── cmd/          # 程序入口
    ├── internal/     # 内部包
    │   ├── api/      # API处理
    │   ├── config/   # 配置
    │   ├── database/ # 数据库操作
    │   ├── model/    # 数据模型
    │   ├── models/   # 数据模型
    │   └── utils/    # 工具函数
    ├── *.sql         # 数据库初始化和更新脚本
    └── go.mod        # Go模块依赖
```

## 前端功能

### 1. **首页**
- 轮播图展示（支持标题显示）
- 平台分类展示（网格布局，带图标）
- 特价商品展示（特价商品显示价格，非特价商品不显示价格）
- 自定义导航栏，支持搜索功能

### 2. **分类页面**
- 一级分类横向滚动展示（带图标）
- 分类展开/收起功能，支持全屏分类浏览
- 二级分类垂直滚动展示
- 商品列表展示（左侧图片右侧信息的单行布局）
- 商品信息显示（名称、描述、价格、原价）
- 商品加入采购单功能
- 商品名称最多显示两行，描述最多显示一行
- 自动适配空状态，确保分类切换时页面不会出错

### 3. **采购单页面**
- 采购单商品列表展示
- 删除商品功能
- 一键复制采购单内容功能
- 清空采购单功能
- 采购单数据本地存储

### 4. **商品详情页**
- 商品图片展示
- 商品信息展示（名称、价格、描述、规格等）
- 商品规格选择
- 加入采购单功能

### 5. **通用功能**
- 适配不同屏幕尺寸的响应式布局
- 模拟数据支持（网络请求失败时自动切换）
- 加载状态提示
- 错误处理和用户友好提示

## 后端功能

- 提供商品、分类、轮播图等数据接口
- 使用Gin框架构建RESTful API
- 支持CORS跨域请求
- 数据库操作封装
- 商品价格区间计算
- 分类层级管理
- 商品原始价格和促销价格支持
- 分类图标上传支持

## 技术栈

### 前端
- **框架**：UniApp (Vue.js)
- **UI组件**：uni-ui, uni-icons
- **布局**：Flex布局
- **样式**：SCSS
- **数据存储**：本地存储

### 后端
- **语言**：Go
- **框架**：Gin
- **数据库**：MySQL
- **API规范**：RESTful

## 运行说明

### 前端运行

1. 确保已安装HBuilderX开发工具
2. 使用HBuilderX打开`mini_app`目录
3. 配置微信开发者工具路径（如需运行到微信小程序）
4. 选择运行方式（如：运行到微信开发者工具、运行到Android模拟器、运行到浏览器等）
5. 等待编译完成，查看运行效果

### 后端运行

1. 确保已安装Go环境（建议Go 1.16+）
2. 安装MySQL数据库并导入初始SQL脚本
3. 进入`go_backend`目录
4. 执行`go mod tidy`安装依赖
5. 根据需要修改配置文件
6. 执行`go run cmd/main.go`启动后端服务
7. 服务默认在本地8080端口运行

## 开发指南

### 前端开发
1. 页面组件位于`pages/`目录下，按功能模块组织
2. API请求封装在`api/`目录下，支持统一的错误处理
3. 静态资源放在`static/`目录下，按类型分类
4. 全局样式定义在`uni.scss`和`App.vue`中

### 后端开发
1. API处理函数位于`internal/api/`目录
2. 数据模型定义在`internal/model/`和`internal/models/`目录
3. 数据库操作封装在`internal/database/`目录
4. 配置管理在`internal/config/`目录
5. 辅助工具函数在`internal/utils/`目录
6. 数据库更新脚本以`.sql`文件形式存放在根目录

## 注意事项

- 开发环境中，前端API请求可能需要配置代理以解决跨域问题
- 采购单数据使用本地存储，实际生产环境中建议使用云数据库
- 模拟数据仅用于演示，正式部署时应连接真实后端API
- 项目包含多个数据库脚本，用于初始化和更新数据库结构
- 商品图片路径默认为相对路径，实际部署时可能需要修改为绝对路径或CDN地址
- 分类图标支持自定义上传，数据库已预留相应字段

## 更新日志

- 添加了分类页面的商品名称和描述行数限制
- 优化了商品卡片样式，实现左侧图片右侧信息的布局
- 修复了分类切换时可能出现的空白页面问题
- 完善了错误处理机制，确保数据加载失败时仍能显示模拟数据